<script>
phpbb.plupload = {
	i18n: {
		'b': '{LA_BYTES_SHORT}',
		'kb': '{LA_KB}',
		'mb': '{LA_MB}',
		'gb': '{LA_GB}',
		'tb': '{LA_TB}',
		'Add Files': '{LA_PLUPLOAD_ADD_FILES}',
		'Add files to the upload queue and click the start button.': '{LA_PLUPLOAD_ADD_FILES_TO_QUEUE}',
		'Close': '{LA_PLUPLOAD_CLOSE}',
		'Drag files here.': '{LA_PLUPLOAD_DRAG}',
		'Duplicate file error.': '{LA_PLUPLOAD_DUPLICATE_ERROR}',
		'File: %s': '{LA_PLUPLOAD_FILE}',
		'File: %s, size: %d, max file size: %d': '{LA_PLUPLOAD_FILE_DETAILS}',
		'File count error.': '{LA_PLUPLOAD_ERR_FILE_COUNT}',
		'File extension error.': '{LA_PLUPLOAD_EXTENSION_ERROR}',
		'File size error.': '{LA_PLUPLOAD_SIZE_ERROR}',
		'File too large:': '{LA_PLUPLOAD_ERR_FILE_TOO_LARGE}',
		'Filename': '{LA_PLUPLOAD_FILENAME}',
		'Generic error.': '{LA_PLUPLOAD_GENERIC_ERROR}',
		'HTTP Error.': '{LA_PLUPLOAD_HTTP_ERROR}',
		'Image format either wrong or not supported.': '{LA_PLUPLOAD_IMAGE_FORMAT}',
		'Init error.': '{LA_PLUPLOAD_INIT_ERROR}',
		'IO error.': '{LA_PLUPLOAD_IO_ERROR}',
		'Invalid file extension:': '{LA_PLUPLOAD_ERR_FILE_INVALID_EXT}',
		'N/A': '{LA_PLUPLOAD_NOT_APPLICABLE}',
		'Runtime ran out of available memory.': '{LA_PLUPLOAD_ERR_RUNTIME_MEMORY}',
		'Security error.': '{LA_PLUPLOAD_SECURITY_ERROR}',
		'Select files': '{LA_PLUPLOAD_SELECT_FILES}',
		'Size': '{LA_PLUPLOAD_SIZE}',
		'Start Upload': '{LA_PLUPLOAD_START_UPLOAD}',
		'Start uploading queue': '{LA_PLUPLOAD_START_CURRENT_UPLOAD}',
		'Status': '{LA_PLUPLOAD_STATUS}',
		'Stop Upload': '{LA_PLUPLOAD_STOP_UPLOAD}',
		'Stop current upload': '{LA_PLUPLOAD_STOP_CURRENT_UPLOAD}',
		"Upload URL might be wrong or doesn't exist.": '{LA_PLUPLOAD_ERR_UPLOAD_URL}',
		'Uploaded %d/%d files': '{LA_PLUPLOAD_UPLOADED}',
		'%d files queued': '{LA_PLUPLOAD_FILES_QUEUED}',
		'%s already present in the queue.': '{LA_PLUPLOAD_ALREADY_QUEUED}'
	},
	config: {
		runtimes: 'html5',
		url: '{S_PLUPLOAD_URL}',
		max_file_size: '{FILESIZE}b',
		chunk_size: '{CHUNK_SIZE}b',
		unique_names: true,
		filters: {
			mime_types: [
				{FILTERS}
			],
			mime_types_max_file_size: [
				{FILTERS}
			],
		},
		{S_RESIZE}
		headers: {'X-PHPBB-USING-PLUPLOAD': '1', 'X-Requested-With': 'XMLHttpRequest'},
		file_data_name: 'fileupload',
		multipart_params: {'add_file': '{LA_ADD_FILE}'},
		form_hook: '#postform',
		browse_button: 'add_files',
		drop_element : 'message',
	},
	lang: {
		ERROR: '{LA_ERROR}',
		TOO_MANY_ATTACHMENTS: '{LA_TOO_MANY_ATTACHMENTS}',
		FORM_INVALID: '{LA_FORM_INVALID}',
	},
	order: '{ATTACH_ORDER}',
	maxFiles: {MAX_ATTACHMENTS},
	data: {S_ATTACH_DATA},
}
</script>
<script>
"use strict";  /*jshint -W097 */ /* not concatenating any other modules so the scope is ok => ignore lint warning */
// Returns a promise that resolves to true if the browser automatically rotates images
// based on exif data and false otherwise
var browserRotates = false;  //global and default

var myPromise = new Promise(function(resolve, reject) {
	// load an image with exif rotation and see if the browser rotates it
	const image = new Image();
	image.onload = () => {
    	resolve(image.naturalWidth === 1);
	};
	image.onerror = reject;
	// this jpeg is 2x1 with orientation=6 so it should rotate to 1x2
	image.src = 'data:image/jpeg;base64,/9j/4QBiRXhpZgAATU0AKgAAAAgABQESAAMAAAABAAYAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAAAAABIAAAAAQAAAEgAAAAB/9sAQwAEAwMEAwMEBAMEBQQEBQYKBwYGBgYNCQoICg8NEBAPDQ8OERMYFBESFxIODxUcFRcZGRsbGxAUHR8dGh8YGhsa/9sAQwEEBQUGBQYMBwcMGhEPERoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoa/8IAEQgAAQACAwERAAIRAQMRAf/EABQAAQAAAAAAAAAAAAAAAAAAAAf/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAF/P//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAQUCf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Bf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Bf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEABj8Cf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAT8hf//aAAwDAQACAAMAAAAQH//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Qf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Qf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAT8Qf//Z';
});

myPromise.then(
	function(value) { browserRotates = value; }
);
</script>
<!-- INCLUDEJS {T_ASSETS_PATH}/plupload/plupload.full.min.js -->
<!-- INCLUDEJS {T_ASSETS_PATH}/javascript/plupload.js -->
